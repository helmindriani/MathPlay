<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <title>MathPlay ğŸ®</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    body {
      background: linear-gradient(135deg, #89f7fe, #66a6ff);
      font-family: Arial, Helvetica, sans-serif;
    }

    .card {
      border-radius: 25px;
      box-shadow: 0 10px 20px rgba(0,0,0,0.2);
    }

    .hidden { display: none; }

    .question {
      font-size: 3.2rem;
      font-weight: bold;
    }

    .btn-answer {
      font-size: 2rem;
      border-radius: 20px;
      padding: 18px;
    }

    /* HASIL JAWABAN */
    .correct {
      color: #28a745;
      font-size: 3rem;
      font-weight: bold;
      animation: pop 0.6s ease;
    }

    .wrong {
      color: #dc3545;
      font-size: 3rem;
      font-weight: bold;
      animation: shake 0.4s ease;
    }

    @keyframes pop {
      0% { transform: scale(0.5); opacity: 0; }
      70% { transform: scale(1.3); opacity: 1; }
      100% { transform: scale(1); }
    }

    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-12px); }
      50% { transform: translateX(12px); }
      75% { transform: translateX(-12px); }
      100% { transform: translateX(0); }
    }

    .fruit {
      font-size: 4.5rem;
      margin: 12px;
      display: inline-block;
      animation: pop 0.4s ease;
    }
  </style>
</head>

<body>

<div class="container py-5">

  <!-- MENU -->
  <div id="menu" class="text-center">
    <div class="card p-4">
      <h1>ğŸ® MathPlay</h1>
      <p>Pilih permainan!</p>

      <div class="d-grid gap-3 mt-4">
        <button class="btn btn-warning btn-lg" onclick="startGame('add')">â• Penjumlahan</button>
        <button class="btn btn-success btn-lg" onclick="startGame('sub')">â– Pengurangan</button>
        <button class="btn btn-danger btn-lg" onclick="startGame('img')">ğŸ Hitung Buah</button>
      </div>
    </div>
  </div>

  <!-- GAME -->
  <div id="game" class="hidden">
    <div class="card p-4 text-center">

      <button class="btn btn-secondary mb-3" onclick="backMenu()">â¬… Menu</button>

      <h2 id="gameTitle"></h2>

      <div id="question" class="question my-3"></div>

      <div id="images" class="mb-4"></div>

      <div class="d-grid gap-3">
        <button class="btn btn-warning btn-answer" onclick="checkAnswer(0)" id="btn0"></button>
        <button class="btn btn-success btn-answer" onclick="checkAnswer(1)" id="btn1"></button>
        <button class="btn btn-danger btn-answer" onclick="checkAnswer(2)" id="btn2"></button>
      </div>

      <div id="result" class="mt-4"></div>
      <p class="fs-4">â­ Skor: <span id="score">0</span></p>

      <button class="btn btn-primary mt-3 btn-lg" onclick="newQuestion()">Soal Baru ğŸ”„</button>

    </div>
  </div>

</div>

<script>
  let correctAnswer = 0;
  let score = 0;
  let gameType = "";

  const fruits = ["ğŸ","ğŸŒ","ğŸ‡","ğŸ‰","ğŸ“","ğŸ","ğŸŠ"];

  function startGame(type) {
    gameType = type;
    score = 0;
    scoreEl().innerText = score;

    menu().classList.add("hidden");
    game().classList.remove("hidden");

    if (type === "add") gameTitle().innerText = "â• Penjumlahan";
    if (type === "sub") gameTitle().innerText = "â– Pengurangan";
    if (type === "img") gameTitle().innerText = "ğŸ Hitung Buah";

    newQuestion();
  }

  function backMenu() {
    game().classList.add("hidden");
    menu().classList.remove("hidden");
  }

  function newQuestion() {
    result().innerHTML = "";
    result().className = "";
    images().innerHTML = "";

    let answers = [];

    if (gameType === "add") {
      let a = rand(1,10), b = rand(1,10);
      correctAnswer = a + b;
      question().innerText = `${a} + ${b}`;
    }

    if (gameType === "sub") {
      let a = rand(5,10), b = rand(1,4);
      correctAnswer = a - b;
      question().innerText = `${a} - ${b}`;
    }

    if (gameType === "img") {
      let count = rand(1,7);
      let fruit = fruits[rand(0, fruits.length-1)];
      correctAnswer = count;
      question().innerText = "Ada berapa buah ini?";

      for (let i = 0; i < count; i++) {
        images().innerHTML += `<span class="fruit">${fruit}</span>`;
      }
    }

    answers = [
      correctAnswer,
      correctAnswer + rand(1,2),
      Math.max(0, correctAnswer - rand(1,2))
    ].sort(() => Math.random() - 0.5);

    answers.forEach((v,i)=>{
      document.getElementById("btn"+i).innerText = v;
    });
  }

  function checkAnswer(i) {
    const chosen = parseInt(document.getElementById("btn"+i).innerText);

    if (chosen === correctAnswer) {
      result().innerHTML = "ğŸ‰<br>BENAR!";
      result().className = "correct";
      score++;
    } else {
      result().innerHTML = "ğŸ˜¢<br>SALAH!";
      result().className = "wrong";
    }

    scoreEl().innerText = score;
  }

  function rand(min,max){
    return Math.floor(Math.random()*(max-min+1))+min;
  }

  // shortcut
  const menu = () => document.getElementById("menu");
  const game = () => document.getElementById("game");
  const question = () => document.getElementById("question");
  const images = () => document.getElementById("images");
  const result = () => document.getElementById("result");
  const scoreEl = () => document.getElementById("score");
  const gameTitle = () => document.getElementById("gameTitle");
</script>

</body>
</html>
